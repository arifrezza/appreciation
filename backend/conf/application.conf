############################################
# Application Configuration
############################################

play.http.secret.key = "changeme"
play.http.secret.key = ${?APPLICATION_SECRET}

openai.api.key="sk-abc123xyz"

############################################
# CORS (Angular Dev)
############################################

play.modules.enabled += "play.api.libs.ws.ahc.AhcWSModule"
play.filters.enabled += "play.filters.cors.CORSFilter"

play.filters.cors {
  pathPrefixes = ["/api"]
  allowedOrigins = ["http://localhost:4200"]
  allowedHttpMethods = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  allowedHttpHeaders = ["Accept", "Content-Type", "Authorization"]
}

############################################
# Disable CSRF (Using JWT)
############################################

play.filters.disabled += "play.filters.csrf.CSRFFilter"

############################################
# Database Configuration (MySQL)
############################################

db.default.driver = "com.mysql.cj.jdbc.Driver"
db.default.url = "jdbc:mysql://localhost:3306/appreciation_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true"
db.default.username = "root"
db.default.password = "12345789"

############################################
# HikariCP Connection Pool
############################################

db.default.hikaricp.connectionTimeout = 30000
db.default.hikaricp.idleTimeout = 600000
db.default.hikaricp.maxLifetime = 1800000
db.default.hikaricp.minimumIdle = 5
db.default.hikaricp.maximumPoolSize = 20

############################################
# Quill Configuration (MySQL)
############################################

quill.ctx.dataSourceClassName = com.mysql.cj.jdbc.MysqlDataSource
quill.ctx.connectionTimeout = 30000

############################################
# Dedicated DB Dispatcher (IMPORTANT)
############################################

db-dispatcher {
  type = Dispatcher
  executor = "thread-pool-executor"

  thread-pool-executor {
    fixed-pool-size = 16
  }

  throughput = 1
}
