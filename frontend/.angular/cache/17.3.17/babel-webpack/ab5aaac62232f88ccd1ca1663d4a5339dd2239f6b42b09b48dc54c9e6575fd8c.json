{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet LoginComponent = class LoginComponent {\n  constructor(authService) {\n    this.authService = authService;\n    this.email = '';\n    this.password = '';\n    this.showModal = false; // \"Who to appreciate\" modal (shown after login)\n    this.showEditorModal = false; // \"Write appreciation\" modal (shown after user picks someone)\n    this.selectedEmployeeName = ''; // Passed to editor modal so it can show \"You are now appreciating {{ name }}\"\n    this.errorMessage = '';\n    this.isLoading = false;\n  }\n  login() {\n    if (!this.email || !this.password) {\n      this.errorMessage = 'Please enter both email and password';\n      return;\n    }\n    this.isLoading = true;\n    this.errorMessage = '';\n    // Email and password will be sent to backend for authentication.\n    // If successful, the modal will be shown. Otherwise, an error message will be displayed.\n    this.authService.login(this.email, this.password).subscribe({\n      next: response => {\n        this.isLoading = false;\n        if (response.success) {\n          this.showModal = true;\n        } else {\n          this.errorMessage = response.message || 'Login failed';\n        }\n      },\n      error: error => {\n        this.isLoading = false;\n        this.errorMessage = 'Invalid credentials. Please try again.';\n        console.error('Login error:', error);\n      }\n    });\n  }\n  closeModal() {\n    this.showModal = false;\n  }\n  /** Called when user selects an employee and clicks \"Next\" in the appreciation modal. */\n  onProceedWithEmployee(employee) {\n    this.selectedEmployeeName = employee.name;\n    this.showModal = false; // Hide \"Who to appreciate\" modal\n    this.showEditorModal = true; // Show \"Write appreciation\" modal with this employee's name\n  }\n  /** Called when user closes the appreciation editor modal (e.g. via ✕). */\n  closeEditorModal() {\n    this.showEditorModal = false;\n  }\n  // MODIFY: Called when user clicks back arrow in editor modal; returns to employee selection modal\n  // FIX: Set showModal first, then hide editor modal to prevent login form from briefly appearing\n  goBackToSelection() {\n    this.showModal = true; // Show employee selection modal first\n    this.showEditorModal = false; // Then hide editor modal (prevents login form flash)\n    // Note: selectedEmployeeName is kept, so if needed later, you know who was previously selected\n  }\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})], LoginComponent);\nexport { LoginComponent };","map":{"version":3,"names":["Component","LoginComponent","constructor","authService","email","password","showModal","showEditorModal","selectedEmployeeName","errorMessage","isLoading","login","subscribe","next","response","success","message","error","console","closeModal","onProceedWithEmployee","employee","name","closeEditorModal","goBackToSelection","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/arifrezza/appreciation-platform/frontend/src/app/login/login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { AuthService } from '../services/auth.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n  email = '';\n  password = '';\n  showModal = false;           // \"Who to appreciate\" modal (shown after login)\n  showEditorModal = false;     // \"Write appreciation\" modal (shown after user picks someone)\n  selectedEmployeeName = '';   // Passed to editor modal so it can show \"You are now appreciating {{ name }}\"\n  errorMessage = '';\n  isLoading = false;\n\n  constructor(private authService: AuthService) {}\n\n  login(): void {\n    if (!this.email || !this.password) {\n      this.errorMessage = 'Please enter both email and password';\n      return;\n    }\n\n    this.isLoading = true;\n    this.errorMessage = '';\n\n    // Email and password will be sent to backend for authentication.\n    // If successful, the modal will be shown. Otherwise, an error message will be displayed.\n    this.authService.login(this.email, this.password).subscribe({\n      next: (response) => {\n        this.isLoading = false;\n        if (response.success) {\n          this.showModal = true;\n        } else {\n          this.errorMessage = response.message || 'Login failed';\n        }\n      },\n      error: (error) => {\n        this.isLoading = false;\n        this.errorMessage = 'Invalid credentials. Please try again.';\n        console.error('Login error:', error);\n      }\n    });\n  }\n\n  closeModal(): void {\n    this.showModal = false;\n  }\n\n  /** Called when user selects an employee and clicks \"Next\" in the appreciation modal. */\n  onProceedWithEmployee(employee: { id: number; name: string }): void {\n    this.selectedEmployeeName = employee.name;\n    this.showModal = false;       // Hide \"Who to appreciate\" modal\n    this.showEditorModal = true;  // Show \"Write appreciation\" modal with this employee's name\n  }\n\n  /** Called when user closes the appreciation editor modal (e.g. via ✕). */\n  closeEditorModal(): void {\n    this.showEditorModal = false;\n  }\n\n  // MODIFY: Called when user clicks back arrow in editor modal; returns to employee selection modal\n  // FIX: Set showModal first, then hide editor modal to prevent login form from briefly appearing\n  goBackToSelection(): void {\n    this.showModal = true;         // Show employee selection modal first\n    this.showEditorModal = false;  // Then hide editor modal (prevents login form flash)\n    // Note: selectedEmployeeName is kept, so if needed later, you know who was previously selected\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAQlC,IAAMC,cAAc,GAApB,MAAMA,cAAc;EASzBC,YAAoBC,WAAwB;IAAxB,KAAAA,WAAW,GAAXA,WAAW;IAR/B,KAAAC,KAAK,GAAG,EAAE;IACV,KAAAC,QAAQ,GAAG,EAAE;IACb,KAAAC,SAAS,GAAG,KAAK,CAAC,CAAW;IAC7B,KAAAC,eAAe,GAAG,KAAK,CAAC,CAAK;IAC7B,KAAAC,oBAAoB,GAAG,EAAE,CAAC,CAAG;IAC7B,KAAAC,YAAY,GAAG,EAAE;IACjB,KAAAC,SAAS,GAAG,KAAK;EAE8B;EAE/CC,KAAKA,CAAA;IACH,IAAI,CAAC,IAAI,CAACP,KAAK,IAAI,CAAC,IAAI,CAACC,QAAQ,EAAE;MACjC,IAAI,CAACI,YAAY,GAAG,sCAAsC;MAC1D;;IAGF,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACD,YAAY,GAAG,EAAE;IAEtB;IACA;IACA,IAAI,CAACN,WAAW,CAACQ,KAAK,CAAC,IAAI,CAACP,KAAK,EAAE,IAAI,CAACC,QAAQ,CAAC,CAACO,SAAS,CAAC;MAC1DC,IAAI,EAAGC,QAAQ,IAAI;QACjB,IAAI,CAACJ,SAAS,GAAG,KAAK;QACtB,IAAII,QAAQ,CAACC,OAAO,EAAE;UACpB,IAAI,CAACT,SAAS,GAAG,IAAI;SACtB,MAAM;UACL,IAAI,CAACG,YAAY,GAAGK,QAAQ,CAACE,OAAO,IAAI,cAAc;;MAE1D,CAAC;MACDC,KAAK,EAAGA,KAAK,IAAI;QACf,IAAI,CAACP,SAAS,GAAG,KAAK;QACtB,IAAI,CAACD,YAAY,GAAG,wCAAwC;QAC5DS,OAAO,CAACD,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACtC;KACD,CAAC;EACJ;EAEAE,UAAUA,CAAA;IACR,IAAI,CAACb,SAAS,GAAG,KAAK;EACxB;EAEA;EACAc,qBAAqBA,CAACC,QAAsC;IAC1D,IAAI,CAACb,oBAAoB,GAAGa,QAAQ,CAACC,IAAI;IACzC,IAAI,CAAChB,SAAS,GAAG,KAAK,CAAC,CAAO;IAC9B,IAAI,CAACC,eAAe,GAAG,IAAI,CAAC,CAAE;EAChC;EAEA;EACAgB,gBAAgBA,CAAA;IACd,IAAI,CAAChB,eAAe,GAAG,KAAK;EAC9B;EAEA;EACA;EACAiB,iBAAiBA,CAAA;IACf,IAAI,CAAClB,SAAS,GAAG,IAAI,CAAC,CAAS;IAC/B,IAAI,CAACC,eAAe,GAAG,KAAK,CAAC,CAAE;IAC/B;EACF;CACD;AA9DYN,cAAc,GAAAwB,UAAA,EAL1BzB,SAAS,CAAC;EACT0B,QAAQ,EAAE,WAAW;EACrBC,WAAW,EAAE,wBAAwB;EACrCC,SAAS,EAAE,CAAC,uBAAuB;CACpC,CAAC,C,EACW3B,cAAc,CA8D1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}